{
  "rules": {
    "shrine": {
      "items": {
        // 允許任何人讀取所有物品
        ".read": true,

        "$itemId": {
          // 寫入驗證規則（只允許新增，不允許修改或刪除）
          ".write": "!data.exists()",
          ".validate": "newData.hasChildren(['type', 'x', 'y', 'createdAt']) &&
                        newData.child('type').isString() &&
                        newData.child('type').val().matches(/^(candle|bouquet|drink|cookie|plush)$/) &&
                        newData.child('x').isNumber() &&
                        newData.child('x').val() >= 0 &&
                        newData.child('x').val() <= 100 &&
                        newData.child('y').isNumber() &&
                        newData.child('y').val() >= 0 &&
                        newData.child('y').val() <= 100 &&
                        newData.child('createdAt').isNumber() &&
                        newData.child('createdAt').val() <= now &&
                        newData.child('createdAt').val() > now - 60000 &&
                        (!newData.hasChild('message') ||
                          (newData.child('message').isString() &&
                           newData.child('message').val().length <= 200))"
        }
      }
    },

    // 預設拒絕所有其他路徑的存取
    ".read": false,
    ".write": false
  }
}
